# Use the i3 config.
exec sed -E '/^(set_from_resource|client)/d' \
    "$XDG_CONFIG_HOME/i3/config" > "$XDG_CACHE_HOME/swayi3config"
include "$XDG_CACHE_HOME/swayi3config"

# Aesthetics.
include "$HOME/.cache/wal/colors-sway"
output * bg $wallpaper fill
# Client		Decoration 	Decoration	Decoration	Split		Window
# <colorclass>		<border>	<bg>		<text>		<indicator>	<child_border>
client.focused		$color2		$color2		$foreground	$color5        	$color2
client.focused_inactive	$color1		$color1		$foreground	$color1		$color1
client.unfocused	$color1		$color1		$foreground	$color1		$color1
client.urgent		$color5		$color5		$background	$color5		$color5
client.placeholder	$color1		$background	$foreground	$color1		$color1
client.background $background

# IO.
input "type:keyboard" {
    xkb_layout us
    xkb_variant colemak
    xkb_option ctrl:nocaps
}

input "type:mouse" {
    dwt enabled
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
}

# Bar.
bar {
   swaybar_command waybar
}

# Custom bindings.
bindsym $mod+Ctrl+space exec ime-menu

# Sway-specific autostart.
exec /usr/share/sway/scripts/inactive-windows-transparency.py
exec_always 'killall mako; koma'
exec swayidle -w \
   timeout 330 'swaymsg "output * dpms off"' \
   resume 'swaymsg "output * dpms on"' \
   timeout 900 'systemctl suspend-then-hibernate' \
   timeout 300 'lock' \
   timeout 30 '[ pgrep "swaylock" ] && swaymsg "output * dpms off"' \
   resume '[ pgrep "swaylock" ] && swaymsg "output * dpms on"' \
   before-sleep 'lock'
# GTK on Wayland ignores the settings.ini file, so load it yourself.
exec ~/.config/sway/import-gsettings.sh \
    gtk-theme:gtk-theme-name \
    icon-theme:gtk-icon-theme-name \
    cursor-theme:gtk-cursor-theme-name

# Distro-specific package fixes and system-wide config.
include /etc/sway/config.d/*
